const key="CsZGAx8GwP1dlmWuflb94puYcOmdpaXP",categories=["travel","health","sports"],ax=s=>{s=`https://api.nytimes.com/svc/topstories/v2/${s}.json?api-key=`+key;return axios(s,{mode:"cors"}).then(s=>s.data.results)};categories.forEach(t=>{let e=document.createElement("section");e.classList.add("Section"),document.querySelector("#main").append(e),e.innerHTML+=`
        <div class="d-f gap-3 p-2 bb-1-ice bt-1-ice">
            <div class="Section__icon br-full d-f jc-center ai-center">
                <img src="./assets/icn_surfing.svg" alt="Header Icon" class="w-auto">
            </div>
            <h2 class="Section__header">${t}</h2>
            <button class="ml-auto show-hide Section__btn"><i class="fas fa-chevron-right"></i></button>
        </div>`,ax(t).then(s=>{s.forEach(s=>{s.section==t&&(console.log(s),e.innerHTML+=`
                <article class="Card">
                    <button class="Card__btn bg-sage"><i class="fas fa-inbox fs-l text-snow"></i></button>
                    <div class="Card__text bg-snow p-2">
                        <h3 class="Card__title">${s.title}</h3>
                        <p class="Card__abstract">${s.abstract}</p>
                    </div>
                </article>`)})})});
function timePointerEvents(t,e){t.style.pointerEvents="none",setTimeout(()=>{t.style.pointerEvents="auto"},e)}document.querySelector(".Main").addEventListener("touchstart",t=>{let s=t.target.parentElement,o=s.closest(".Card");if(t.target.parentElement.classList.contains("Card__text")){let e=Math.floor(t.touches[0].clientX),n,a=o.querySelector(".Card__btn"),r=a.offsetWidth;s.classList.contains("Card__text")&&(s.addEventListener("touchmove",t=>{n=Math.floor(t.touches[0].clientX),n<e&&n>e-r&&(s.style.transform=`translateX(${n-e}px)`)}),s.addEventListener("touchend",t=>{n<e-r/3?s.style.transform=`translateX(-${r}px)`:s.style.transform="translateX(0px)"})),a.onclick=()=>{a.disabled=!0;var t={id:o.getAttribute("data-number"),name:o.querySelector(".Card__text").textContent};localStorage[""+t.id]=JSON.stringify(t),o.classList.add("del-animation"),o.style.pointerEvents="none",setTimeout(()=>{o.remove()},1200)}}else s.classList.contains("show-hide")&&(s.onclick=()=>{o=t.target.closest(".Section"),"rotate(90deg)"!=t.target.style.transform?(t.target.style.transform="rotate(90deg)",o.querySelectorAll(".Card").forEach(t=>{t.classList.add("hide-animation"),t.style.pointerEvents="none"})):(t.target.style.transform="rotate(0deg)",o.querySelectorAll(".Card").forEach(t=>{t.classList.remove("hide-animation"),t.style.pointerEvents="auto"}))},timePointerEvents(t.target,1200))});